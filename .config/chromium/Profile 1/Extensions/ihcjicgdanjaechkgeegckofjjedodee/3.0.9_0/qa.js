chrome||browser||(window.chrome=chrome||window.chrome||window.browser),(chrome||window.chrome).runtime.getURL(""),(()=>{"use strict";const e=(Object.freeze({LicenseStateUnknown:0,LicenseStateFree:1,LicenseStateTrial:2,LicenseStateTrialExpired:3,LicenseStateLicensed:4,LicenseStateLicenseExpired:5,LicenseStateLicenseGrace:6}),Object.freeze([2,4,6]),"MSG_INT_VER"),r="MSG_IS_LAYER_ACTIVE",t="undefined"!=typeof window?window:self,o=t.chrome||t.browser||browser;let n;console.log(`POLYFILL => User Agent: ${navigator.userAgent}, Browser: ${o}`);try{n=indexedDB||t.indexedDB}catch(e){console.log(`Error initializing indexedDB: ${e.message}`)}performance||t.performance,URL||t.URL,document.addEventListener("DOMContentLoaded",(function(){new Promise(((e,r)=>{o.runtime.sendMessage({type:"MSG_USER_GROUP_GET"},(function(r){!r||r.error?console.error("Error fetching AB group",r):$(".value-ab-group").text("GROUP_A"===r.success?"A":"B"),e()}))})).then((e=>{o.runtime.sendMessage({type:"MSG_UUID_GET"},(function(e){return!e||e.error?console.error("Error fetching UUID",e):$(".value-uuid").text(e.success),Promise.resolve()}))})).then((r=>{o.runtime.sendMessage({type:e},(function(e){return!e||e.error?console.error("Error fetching int ver",e):$(".value-internal-version").text(e.success),Promise.resolve()}))})).then((r=>{o.runtime.sendMessage({type:e},(function(e){return!e||e.error?console.error("Error fetching int ver",e):$(".value-internal-version").text(e.success),Promise.resolve()}))})).then((e=>{})),$("#check-layers-url").val("http://www.malwarebytes.com"),$("#check-layers-btn").on("click",(function(){var e;e=$("#check-layers-url").val(),console.log("Checking layers for "+e),$(".value-global-active").text("--"),$(".value-malware-layer-active").text("--"),$(".value-scam-layer-active").text("--"),$(".value-ads-layer-active").text("--"),o.storage.local.get("enableProtection",(function(e){o.runtime.lastError?console.error("Can't check global layer: ",o.runtime.lastError):$(".value-global-active").text(!1===e.enableProtection?"No":"Yes")})),o.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_MALWARE",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-malware-layer-active").text(e.success?"Yes":"No"),Promise.resolve()})),o.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_SCAMS",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-scam-layer-active").text(e.success?"Yes":"No"),Promise.resolve()})),o.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_ADS",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-ads-layer-active").text(e.success?"Yes":"No"),Promise.resolve()}))}))}))})();